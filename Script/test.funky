
do
(
	// create some maps
	set_copy("map" map)
	push_copy(get("map") "first" 1 "second" 2 "third" 3)
	set_copy("map2" map)
	push_copy(get("map2") "ree" true "bro" 3.1415 "skidadel" list)
	// get reference to the list element in the map
	set_ref("l" get_elem(get("map2") "skidadel"))
	// add some numbers to that list
	push_copy(get("l") 1 2 3 4 5)
	
	// define function
	// use .name for local variables and #name for arguments
	// to not collide with external variables
	def("log_map" function(//arguments: #map
		// get keys from map
		set_ref(".keys" keys(get("#map")))
		// loop through each key
		set_copy(".i" 0)
		while(less(get(".i") count(get(".keys"))) do(
			// get key from list
			set_ref(".key" get_elem(get(".keys") get(".i")))
			// print key and value
			print(get(".key") ": " get_elem(get("#map") get(".key")) "\n")
			// increment i
			set_copy(".i" add(get(".i") 1))
		))
	))
	
	print(get("map") "\n\n")
	// call function log_map with the argument "#map" set to variable "map"
	get("log_map" "#map" get("map"))
	
	print("\n" get("map2") "\n\n")
	get("log_map" "#map" get("map2"))
)

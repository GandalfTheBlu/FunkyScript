
do
(
	def(":obj" function(//#name
		set_copy(".map" map)
		def(".greeting" function(
			print("hello!\n")
		))
		push_ref(get(".map")
			"name" get("#name")
			"greeting" get_func(".greeting")
			"say_name" func_ref(function(//#this
				print("my name is " get_elem(get("#this") "name") "\n")
			))
		)
		return_ref(get(".map"))
	))
	
	set_ref("obj1" get(":obj" "#name" "Grolf"))
	print(get("obj1") "\n")
	eval(get_elem(get("obj1") "greeting"))
	eval(get_elem(get("obj1") "say_name") "#this" get("obj1"))
	
	set_ref("obj2" get(":obj" "#name" "Grylf"))
	print(get("obj2") "\n")
	eval(get_elem(get("obj2") "greeting"))
	eval(get_elem(get("obj2") "say_name") "#this" get("obj2"))
)
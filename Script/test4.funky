
do
(
	def(":ipow" "#a" "#b" function(
		set_copy(".i" 0)
		set_copy(".res" 1)
		while(less(get(".i") get("#b")) do(
			set_copy(".res" mult(get(".res") get("#a")))
			set_copy(".i" add(get(".i") 1))
		))
		return_copy(get(".res"))
	))
	
	print(get(":ipow" 2 8) "\n")
	
	def(":obj" "#name" "#age" function(
		set_copy(".obj" map)
		def(":print" "#thing" function(
			print(get("#thing"))
		))
		push_copy(get(".obj") 
			".name" get("#name")
			".age" get("#age")
			":say_hello" lambda(print("hello there!\n"))
			":echo" lambda("#msg" function(
				print(get("#msg"))
			))
			":print" ref_func(":print")
		)
		return_ref(get(".obj"))
	))
	
	set_ref("obj" get(":obj" "Greg" 21))
	print(get("obj") "\n")
	
	eval(get_elem(get("obj") ":say_hello"))
	eval(get_elem(get("obj") ":echo") "this is an echo!\n")
	eval(get_elem(get("obj") ":print") "print this stuff too!\n")
)